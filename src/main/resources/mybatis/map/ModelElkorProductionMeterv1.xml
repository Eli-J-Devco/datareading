<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ModelElkorProductionMeterv1">
	<resultMap id="ModelElkorProductionPeterMap"
		type="com.nwm.api.entities.ModelElkorProductionMeterv1Entity">
		<result property="time" column="time" />
		<result property="id_device" column="id_device" />
		<result property="error" column="error" />
		<result property="low_alarm" column="low_alarm" />
		<result property="high_alarm" column="high_alarm" />

		<result property="ActivePowerTotal" column="ActivePowerTotal" />
		<result property="ReactivePowerTotal"
			column="ReactivePowerTotal" />
		<result property="ApparentPowerTotal"
			column="ApparentPowerTotal" />
		<result property="VoltageAverage" column="VoltageAverage" />
		<result property="VoltageLLAverage" column="VoltageLLAverage" />
		<result property="CurrentAverage" column="CurrentAverage" />
		<result property="SystemPowerFactor" column="SystemPowerFactor" />
		<result property="SystemFrequency" column="SystemFrequency" />
		<result property="VoltageAverageAngle"
			column="VoltageAverageAngle" />
		<result property="SystemQuadrant" column="SystemQuadrant" />
		<result property="VoltageA" column="VoltageA" />
		<result property="VoltageB" column="VoltageB" />
		<result property="VoltageC" column="VoltageC" />
		<result property="VoltageAB" column="VoltageAB" />
		<result property="VoltageBC" column="VoltageBC" />
		<result property="VoltageAC" column="VoltageAC" />
		<result property="CurrentA" column="CurrentA" />
		<result property="CurrentB" column="CurrentB" />
		<result property="CurrentC" column="CurrentC" />
		<result property="ActivePowerA" column="ActivePowerA" />
		<result property="ActivePowerB" column="ActivePowerB" />
		<result property="ActivePowerC" column="ActivePowerC" />
		<result property="ReactivePowerA" column="ReactivePowerA" />
		<result property="ReactivePowerB" column="ReactivePowerB" />
		<result property="ReactivePowerC" column="ReactivePowerC" />
		<result property="ApparentPowerA" column="ApparentPowerA" />
		<result property="ApparentPowerB" column="ApparentPowerB" />
		<result property="ApparentPowerC" column="ApparentPowerC" />
		<result property="PowerFactorA" column="PowerFactorA" />
		<result property="PowerFactorB" column="PowerFactorB" />
		<result property="PowerFactorC" column="PowerFactorC" />
		<result property="VoltageAngleAB" column="VoltageAngleAB" />
		<result property="VoltageAngleBC" column="VoltageAngleBC" />
		<result property="VoltageAngleCA" column="VoltageAngleCA" />
		<result property="QuadrantA" column="QuadrantA" />
		<result property="QuadrantB" column="QuadrantB" />
		<result property="QuadrantC" column="QuadrantC" />
		<result property="SlidingWindowPower"
			column="SlidingWindowPower" />
		<result property="NetTotalEnergy" column="NetTotalEnergy" />
		<result property="TotalNetApparentEnergy"
			column="TotalNetApparentEnergy" />
		<result property="TotalImportEnergy" column="TotalImportEnergy" />
		<result property="TotalExportEnergy" column="TotalExportEnergy" />
		<result property="TotalImportApparentEnergy"
			column="TotalImportApparentEnergy" />
		<result property="TotalExportApparentEnergy"
			column="TotalExportApparentEnergy" />
		<result property="Q1TotalReactiveEnergy"
			column="Q1TotalReactiveEnergy" />
		<result property="Q2TotalReactiveEnergy"
			column="Q2TotalReactiveEnergy" />
		<result property="Q3TotalReactiveEnergy"
			column="Q3TotalReactiveEnergy" />
		<result property="Q4TotalReactiveEnergy"
			column="Q4TotalReactiveEnergy" />
		<result property="Q1Q2TotalInductiveReactiveEnergy"
			column="Q1Q2TotalInductiveReactiveEnergy" />
		<result property="Q3Q4TotalCapacitiveReactiveEnergy"
			column="Q3Q4TotalCapacitiveReactiveEnergy" />
		<result property="NetEnergyA" column="NetEnergyA" />
		<result property="NetEnergyB" column="NetEnergyB" />
		<result property="NetEnergyC" column="NetEnergyC" />
		<result property="NetApparentEnergyA"
			column="NetApparentEnergyA" />
		<result property="NetApparentEnergyB"
			column="NetApparentEnergyB" />
		<result property="NetApparentEnergyC"
			column="NetApparentEnergyC" />
		<result property="ImportEnergyA" column="ImportEnergyA" />
		<result property="ImportEnergyB" column="ImportEnergyB" />
		<result property="ImportEnergyC" column="ImportEnergyC" />
		<result property="ExportEnergyA" column="ExportEnergyA" />
		<result property="ExportEnergyB" column="ExportEnergyB" />
		<result property="ExportEnergyC" column="ExportEnergyC" />
		<result property="ImportApparentEnergyA"
			column="ImportApparentEnergyA" />
		<result property="ImportApparentEnergyB"
			column="ImportApparentEnergyB" />
		<result property="ImportApparentEnergyC"
			column="ImportApparentEnergyC" />
		<result property="ExportApparentEnergyA"
			column="ExportApparentEnergyA" />
		<result property="ExportApparentEnergyB"
			column="ExportApparentEnergyB" />
		<result property="ExportApparentEnergyC"
			column="ExportApparentEnergyC" />
		<result property="Q1ReactiveEnergyA" column="Q1ReactiveEnergyA" />
		<result property="Q1ReactiveEnergyB" column="Q1ReactiveEnergyB" />
		<result property="Q1ReactiveEnergyC" column="Q1ReactiveEnergyC" />
		<result property="Q2ReactiveEnergyA" column="Q2ReactiveEnergyA" />
		<result property="Q2ReactiveEnergyB" column="Q2ReactiveEnergyB" />
		<result property="Q2ReactiveEnergyC" column="Q2ReactiveEnergyC" />
		<result property="Q3ReactiveEnergyA" column="Q3ReactiveEnergyA" />
		<result property="Q3ReactiveEnergyB" column="Q3ReactiveEnergyB" />
		<result property="Q3ReactiveEnergyC" column="Q3ReactiveEnergyC" />
		<result property="Q4ReactiveEnergyA" column="Q4ReactiveEnergyA" />
		<result property="Q4ReactiveEnergyB" column="Q4ReactiveEnergyB" />
		<result property="Q4ReactiveEnergyC" column="Q4ReactiveEnergyC" />
		<result property="nvmActivePower" column="nvmActivePower" />
		<result property="nvmActiveEnergy" column="nvmActiveEnergy" />
		<result property="MeasuredProduction" column="MeasuredProduction" />
		<result property="datatablename" column="datatablename" />
		<result property="view_tablename" column="view_tablename" />
		<result property="job_tablename" column="job_tablename" />



	</resultMap>

	<insert id="insertModelElkorProductionMeterv1"
		useGeneratedKeys="true" keyProperty="time">
		INSERT INTO `${datatablename}`
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="time != null">
				`time`,
			</if>
			<if test="id_device != 0.001">
				`id_device`,
			</if>
			<if test="error != 0.001">
				`error`,
			</if>
			<if test="low_alarm != 0.001">
				`low_alarm`,
			</if>
			<if test="high_alarm != 0.001">
				`high_alarm`,
			</if>
			<if test="ActivePowerTotal != 0.001">
				`ActivePowerTotal`,
			</if>
			<if test="ReactivePowerTotal != 0.001">
				`ReactivePowerTotal`,
			</if>
			<if test="ApparentPowerTotal != 0.001">
				`ApparentPowerTotal`,
			</if>
			<if test="VoltageAverage != 0.001">
				`VoltageAverage`,
			</if>
			<if test="VoltageLLAverage != 0.001">
				`VoltageLLAverage`,
			</if>
			<if test="CurrentAverage != 0.001">
				`CurrentAverage`,
			</if>
			<if test="SystemPowerFactor != 0.001">
				`SystemPowerFactor`,
			</if>
			<if test="SystemFrequency != 0.001">
				`SystemFrequency`,
			</if>
			<if test="VoltageAverageAngle != 0.001">
				`VoltageAverageAngle`,
			</if>
			<if test="SystemQuadrant != 0.001">
				`SystemQuadrant`,
			</if>
			<if test="VoltageA != 0.001">
				`VoltageA`,
			</if>
			<if test="VoltageB != 0.001">
				`VoltageB`,
			</if>
			<if test="VoltageC != 0.001">
				`VoltageC`,
			</if>
			<if test="VoltageAB != 0.001">
				`VoltageAB`,
			</if>
			<if test="VoltageBC != 0.001">
				`VoltageBC`,
			</if>
			<if test="VoltageAC != 0.001">
				`VoltageAC`,
			</if>
			<if test="CurrentA != 0.001">
				`CurrentA`,
			</if>
			<if test="CurrentB != 0.001">
				`CurrentB`,
			</if>
			<if test="CurrentC != 0.001">
				`CurrentC`,
			</if>
			<if test="ActivePowerA != 0.001">
				`ActivePowerA`,
			</if>
			<if test="ActivePowerB != 0.001">
				`ActivePowerB`,
			</if>
			<if test="ActivePowerC != 0.001">
				`ActivePowerC`,
			</if>
			<if test="ReactivePowerA != 0.001">
				`ReactivePowerA`,
			</if>
			<if test="ReactivePowerB != 0.001">
				`ReactivePowerB`,
			</if>
			<if test="ReactivePowerC != 0.001">
				`ReactivePowerC`,
			</if>
			<if test="ApparentPowerA != 0.001">
				`ApparentPowerA`,
			</if>
			<if test="ApparentPowerB != 0.001">
				`ApparentPowerB`,
			</if>
			<if test="ApparentPowerC != 0.001">
				`ApparentPowerC`,
			</if>
			<if test="PowerFactorA != 0.001">
				`PowerFactorA`,
			</if>
			<if test="PowerFactorB != 0.001">
				`PowerFactorB`,
			</if>
			<if test="PowerFactorC != 0.001">
				`PowerFactorC`,
			</if>
			<if test="VoltageAngleAB != 0.001">
				`VoltageAngleAB`,
			</if>
			<if test="VoltageAngleBC != 0.001">
				`VoltageAngleBC`,
			</if>
			<if test="VoltageAngleCA != 0.001">
				`VoltageAngleCA`,
			</if>
			<if test="QuadrantA != 0.001">
				`QuadrantA`,
			</if>
			<if test="QuadrantB != 0.001">
				`QuadrantB`,
			</if>
			<if test="QuadrantC != 0.001">
				`QuadrantC`,
			</if>
			<if test="SlidingWindowPower != 0.001">
				`SlidingWindowPower`,
			</if>
			<if test="NetTotalEnergy != 0.001">
				`NetTotalEnergy`,
			</if>
			<if test="TotalNetApparentEnergy != 0.001">
				`TotalNetApparentEnergy`,
			</if>
			<if test="TotalImportEnergy != 0.001">
				`TotalImportEnergy`,
			</if>
			<if test="TotalExportEnergy != 0.001">
				`TotalExportEnergy`,
			</if>
			<if test="TotalImportApparentEnergy != 0.001">
				`TotalImportApparentEnergy`,
			</if>
			<if test="TotalExportApparentEnergy != 0.001">
				`TotalExportApparentEnergy`,
			</if>
			<if test="Q1TotalReactiveEnergy != 0.001">
				`Q1TotalReactiveEnergy`,
			</if>
			<if test="Q2TotalReactiveEnergy != 0.001">
				`Q2TotalReactiveEnergy`,
			</if>
			<if test="Q3TotalReactiveEnergy != 0.001">
				`Q3TotalReactiveEnergy`,
			</if>
			<if test="Q4TotalReactiveEnergy != 0.001">
				`Q4TotalReactiveEnergy`,
			</if>
			<if test="Q1Q2TotalInductiveReactiveEnergy != 0.001">
				`Q1Q2TotalInductiveReactiveEnergy`,
			</if>
			<if test="Q3Q4TotalCapacitiveReactiveEnergy != 0.001">
				`Q3Q4TotalCapacitiveReactiveEnergy`,
			</if>
			<if test="NetEnergyA != 0.001">
				`NetEnergyA`,
			</if>
			<if test="NetEnergyB != 0.001">
				`NetEnergyB`,
			</if>
			<if test="NetEnergyC != 0.001">
				`NetEnergyC`,
			</if>
			<if test="NetApparentEnergyA != 0.001">
				`NetApparentEnergyA`,
			</if>
			<if test="NetApparentEnergyB != 0.001">
				`NetApparentEnergyB`,
			</if>
			<if test="NetApparentEnergyC != 0.001">
				`NetApparentEnergyC`,
			</if>
			<if test="ImportEnergyA != 0.001">
				`ImportEnergyA`,
			</if>
			<if test="ImportEnergyB != 0.001">
				`ImportEnergyB`,
			</if>
			<if test="ImportEnergyC != 0.001">
				`ImportEnergyC`,
			</if>
			<if test="ExportEnergyA != 0.001">
				`ExportEnergyA`,
			</if>
			<if test="ExportEnergyB != 0.001">
				`ExportEnergyB`,
			</if>
			<if test="ExportEnergyC != 0.001">
				`ExportEnergyC`,
			</if>
			<if test="ImportApparentEnergyA != 0.001">
				`ImportApparentEnergyA`,
			</if>
			<if test="ImportApparentEnergyB != 0.001">
				`ImportApparentEnergyB`,
			</if>
			<if test="ImportApparentEnergyC != 0.001">
				`ImportApparentEnergyC`,
			</if>
			<if test="ExportApparentEnergyA != 0.001">
				`ExportApparentEnergyA`,
			</if>
			<if test="ExportApparentEnergyB != 0.001">
				`ExportApparentEnergyB`,
			</if>
			<if test="ExportApparentEnergyC != 0.001">
				`ExportApparentEnergyC`,
			</if>
			<if test="Q1ReactiveEnergyA != 0.001">
				`Q1ReactiveEnergyA`,
			</if>
			<if test="Q1ReactiveEnergyB != 0.001">
				`Q1ReactiveEnergyB`,
			</if>
			<if test="Q1ReactiveEnergyC != 0.001">
				`Q1ReactiveEnergyC`,
			</if>
			<if test="Q2ReactiveEnergyA != 0.001">
				`Q2ReactiveEnergyA`,
			</if>
			<if test="Q2ReactiveEnergyB != 0.001">
				`Q2ReactiveEnergyB`,
			</if>
			<if test="Q2ReactiveEnergyC != 0.001">
				`Q2ReactiveEnergyC`,
			</if>
			<if test="Q3ReactiveEnergyA != 0.001">
				`Q3ReactiveEnergyA`,
			</if>
			<if test="Q3ReactiveEnergyB != 0.001">
				`Q3ReactiveEnergyB`,
			</if>
			<if test="Q3ReactiveEnergyC != 0.001">
				`Q3ReactiveEnergyC`,
			</if>
			<if test="Q4ReactiveEnergyA != 0.001">
				`Q4ReactiveEnergyA`,
			</if>
			<if test="Q4ReactiveEnergyB != 0.001">
				`Q4ReactiveEnergyB`,
			</if>
			<if test="Q4ReactiveEnergyC != 0.001">
				`Q4ReactiveEnergyC`,
			</if>
			<if test="nvmActivePower != 0.001">
				`nvmActivePower`,
			</if>
			<if test="nvmActiveEnergy != 0.001">
				`nvmActiveEnergy`,
			</if>
			<if test="MeasuredProduction != 0.001">
				`MeasuredProduction`,
			</if>
		</trim>

		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="time != null">
				#{time},
			</if>
			<if test="id_device != 0.001">
				#{id_device},
			</if>
			<if test="error != 0.001">
				#{error},
			</if>
			<if test="low_alarm != 0.001">
				#{low_alarm},
			</if>
			<if test="high_alarm != 0.001">
				#{high_alarm},
			</if>
			<if test="ActivePowerTotal != 0.001">
				#{ActivePowerTotal},
			</if>
			<if test="ReactivePowerTotal != 0.001">
				#{ReactivePowerTotal},
			</if>
			<if test="ApparentPowerTotal != 0.001">
				#{ApparentPowerTotal},
			</if>
			<if test="VoltageAverage != 0.001">
				#{VoltageAverage},
			</if>
			<if test="VoltageLLAverage != 0.001">
				#{VoltageLLAverage},
			</if>
			<if test="CurrentAverage != 0.001">
				#{CurrentAverage},
			</if>
			<if test="SystemPowerFactor != 0.001">
				#{SystemPowerFactor},
			</if>
			<if test="SystemFrequency != 0.001">
				#{SystemFrequency},
			</if>
			<if test="VoltageAverageAngle != 0.001">
				#{VoltageAverageAngle},
			</if>
			<if test="SystemQuadrant != 0.001">
				#{SystemQuadrant},
			</if>
			<if test="VoltageA != 0.001">
				#{VoltageA},
			</if>
			<if test="VoltageB != 0.001">
				#{VoltageB},
			</if>
			<if test="VoltageC != 0.001">
				#{VoltageC},
			</if>
			<if test="VoltageAB != 0.001">
				#{VoltageAB},
			</if>
			<if test="VoltageBC != 0.001">
				#{VoltageBC},
			</if>
			<if test="VoltageAC != 0.001">
				#{VoltageAC},
			</if>
			<if test="CurrentA != 0.001">
				#{CurrentA},
			</if>
			<if test="CurrentB != 0.001">
				#{CurrentB},
			</if>
			<if test="CurrentC != 0.001">
				#{CurrentC},
			</if>
			<if test="ActivePowerA != 0.001">
				#{ActivePowerA},
			</if>
			<if test="ActivePowerB != 0.001">
				#{ActivePowerB},
			</if>
			<if test="ActivePowerC != 0.001">
				#{ActivePowerC},
			</if>
			<if test="ReactivePowerA != 0.001">
				#{ReactivePowerA},
			</if>
			<if test="ReactivePowerB != 0.001">
				#{ReactivePowerB},
			</if>
			<if test="ReactivePowerC != 0.001">
				#{ReactivePowerC},
			</if>
			<if test="ApparentPowerA != 0.001">
				#{ApparentPowerA},
			</if>
			<if test="ApparentPowerB != 0.001">
				#{ApparentPowerB},
			</if>
			<if test="ApparentPowerC != 0.001">
				#{ApparentPowerC},
			</if>
			<if test="PowerFactorA != 0.001">
				#{PowerFactorA},
			</if>
			<if test="PowerFactorB != 0.001">
				#{PowerFactorB},
			</if>
			<if test="PowerFactorC != 0.001">
				#{PowerFactorC},
			</if>
			<if test="VoltageAngleAB != 0.001">
				#{VoltageAngleAB},
			</if>
			<if test="VoltageAngleBC != 0.001">
				#{VoltageAngleBC},
			</if>
			<if test="VoltageAngleCA != 0.001">
				#{VoltageAngleCA},
			</if>
			<if test="QuadrantA != 0.001">
				#{QuadrantA},
			</if>
			<if test="QuadrantB != 0.001">
				#{QuadrantB},
			</if>
			<if test="QuadrantC != 0.001">
				#{QuadrantC},
			</if>
			<if test="SlidingWindowPower != 0.001">
				#{SlidingWindowPower},
			</if>
			<if test="NetTotalEnergy != 0.001">
				#{NetTotalEnergy},
			</if>
			<if test="TotalNetApparentEnergy != 0.001">
				#{TotalNetApparentEnergy},
			</if>
			<if test="TotalImportEnergy != 0.001">
				#{TotalImportEnergy},
			</if>
			<if test="TotalExportEnergy != 0.001">
				#{TotalExportEnergy},
			</if>
			<if test="TotalImportApparentEnergy != 0.001">
				#{TotalImportApparentEnergy},
			</if>
			<if test="TotalExportApparentEnergy != 0.001">
				#{TotalExportApparentEnergy},
			</if>
			<if test="Q1TotalReactiveEnergy != 0.001">
				#{Q1TotalReactiveEnergy},
			</if>
			<if test="Q2TotalReactiveEnergy != 0.001">
				#{Q2TotalReactiveEnergy},
			</if>
			<if test="Q3TotalReactiveEnergy != 0.001">
				#{Q3TotalReactiveEnergy},
			</if>
			<if test="Q4TotalReactiveEnergy != 0.001">
				#{Q4TotalReactiveEnergy},
			</if>
			<if test="Q1Q2TotalInductiveReactiveEnergy != 0.001">
				#{Q1Q2TotalInductiveReactiveEnergy},
			</if>
			<if test="Q3Q4TotalCapacitiveReactiveEnergy != 0.001">
				#{Q3Q4TotalCapacitiveReactiveEnergy},
			</if>
			<if test="NetEnergyA != 0.001">
				#{NetEnergyA},
			</if>
			<if test="NetEnergyB != 0.001">
				#{NetEnergyB},
			</if>
			<if test="NetEnergyC != 0.001">
				#{NetEnergyC},
			</if>
			<if test="NetApparentEnergyA != 0.001">
				#{NetApparentEnergyA},
			</if>
			<if test="NetApparentEnergyB != 0.001">
				#{NetApparentEnergyB},
			</if>
			<if test="NetApparentEnergyC != 0.001">
				#{NetApparentEnergyC},
			</if>
			<if test="ImportEnergyA != 0.001">
				#{ImportEnergyA},
			</if>
			<if test="ImportEnergyB != 0.001">
				#{ImportEnergyB},
			</if>
			<if test="ImportEnergyC != 0.001">
				#{ImportEnergyC},
			</if>
			<if test="ExportEnergyA != 0.001">
				#{ExportEnergyA},
			</if>
			<if test="ExportEnergyB != 0.001">
				#{ExportEnergyB},
			</if>
			<if test="ExportEnergyC != 0.001">
				#{ExportEnergyC},
			</if>
			<if test="ImportApparentEnergyA != 0.001">
				#{ImportApparentEnergyA},
			</if>
			<if test="ImportApparentEnergyB != 0.001">
				#{ImportApparentEnergyB},
			</if>
			<if test="ImportApparentEnergyC != 0.001">
				#{ImportApparentEnergyC},
			</if>
			<if test="ExportApparentEnergyA != 0.001">
				#{ExportApparentEnergyA},
			</if>
			<if test="ExportApparentEnergyB != 0.001">
				#{ExportApparentEnergyB},
			</if>
			<if test="ExportApparentEnergyC != 0.001">
				#{ExportApparentEnergyC},
			</if>
			<if test="Q1ReactiveEnergyA != 0.001">
				#{Q1ReactiveEnergyA},
			</if>
			<if test="Q1ReactiveEnergyB != 0.001">
				#{Q1ReactiveEnergyB},
			</if>
			<if test="Q1ReactiveEnergyC != 0.001">
				#{Q1ReactiveEnergyC},
			</if>
			<if test="Q2ReactiveEnergyA != 0.001">
				#{Q2ReactiveEnergyA},
			</if>
			<if test="Q2ReactiveEnergyB != 0.001">
				#{Q2ReactiveEnergyB},
			</if>
			<if test="Q2ReactiveEnergyC != 0.001">
				#{Q2ReactiveEnergyC},
			</if>
			<if test="Q3ReactiveEnergyA != 0.001">
				#{Q3ReactiveEnergyA},
			</if>
			<if test="Q3ReactiveEnergyB != 0.001">
				#{Q3ReactiveEnergyB},
			</if>
			<if test="Q3ReactiveEnergyC != 0.001">
				#{Q3ReactiveEnergyC},
			</if>
			<if test="Q4ReactiveEnergyA != 0.001">
				#{Q4ReactiveEnergyA},
			</if>
			<if test="Q4ReactiveEnergyB != 0.001">
				#{Q4ReactiveEnergyB},
			</if>
			<if test="Q4ReactiveEnergyC != 0.001">
				#{Q4ReactiveEnergyC},
			</if>
			<if test="nvmActivePower != 0.001">
				#{nvmActivePower},
			</if>
			<if test="nvmActiveEnergy != 0.001">
				#{nvmActiveEnergy},
			</if>
			<if test="MeasuredProduction != 0.001">
				#{MeasuredProduction},
			</if>
		</trim>

		<trim prefix="ON DUPLICATE KEY UPDATE " suffix=""
			suffixOverrides=",">

			<if test="id_device != 0.001">
				id_device = #{id_device},
			</if>
			<if test="error != 0.001">
				`error` = #{error},
			</if>
			<if test="low_alarm != 0.001">
				low_alarm = #{low_alarm},
			</if>
			<if test="high_alarm != 0.001">
				high_alarm = #{high_alarm},
			</if>
			<if test="ActivePowerTotal != 0.001">
				ActivePowerTotal = #{ActivePowerTotal},
			</if>
			<if test="ReactivePowerTotal != 0.001">
				ReactivePowerTotal = #{ReactivePowerTotal},
			</if>
			<if test="ApparentPowerTotal != 0.001">
				ApparentPowerTotal = #{ApparentPowerTotal},
			</if>
			<if test="VoltageAverage != 0.001">
				VoltageAverage = #{VoltageAverage},
			</if>
			<if test="VoltageLLAverage != 0.001">
				VoltageLLAverage = #{VoltageLLAverage},
			</if>
			<if test="CurrentAverage != 0.001">
				CurrentAverage = #{CurrentAverage},
			</if>
			<if test="SystemPowerFactor != 0.001">
				SystemPowerFactor = #{SystemPowerFactor},
			</if>
			<if test="SystemFrequency != 0.001">
				SystemFrequency = #{SystemFrequency},
			</if>
			<if test="VoltageAverageAngle != 0.001">
				VoltageAverageAngle = #{VoltageAverageAngle},
			</if>
			<if test="SystemQuadrant != 0.001">
				SystemQuadrant = #{SystemQuadrant},
			</if>
			<if test="VoltageA != 0.001">
				VoltageA = #{VoltageA},
			</if>
			<if test="VoltageB != 0.001">
				VoltageB = #{VoltageB},
			</if>
			<if test="VoltageC != 0.001">
				VoltageC = #{VoltageC},
			</if>
			<if test="VoltageAB != 0.001">
				VoltageAB = #{VoltageAB},
			</if>
			<if test="VoltageBC != 0.001">
				VoltageBC = #{VoltageBC},
			</if>
			<if test="VoltageAC != 0.001">
				VoltageAC = #{VoltageAC},
			</if>
			<if test="CurrentA != 0.001">
				CurrentA = #{CurrentA},
			</if>
			<if test="CurrentB != 0.001">
				CurrentB = #{CurrentB},
			</if>
			<if test="CurrentC != 0.001">
				CurrentC = #{CurrentC},
			</if>
			<if test="ActivePowerA != 0.001">
				ActivePowerA = #{ActivePowerA},
			</if>
			<if test="ActivePowerB != 0.001">
				ActivePowerB = #{ActivePowerB},
			</if>
			<if test="ActivePowerC != 0.001">
				ActivePowerC = #{ActivePowerC},
			</if>
			<if test="ReactivePowerA != 0.001">
				ReactivePowerA = #{ReactivePowerA},
			</if>
			<if test="ReactivePowerB != 0.001">
				ReactivePowerB = #{ReactivePowerB},
			</if>
			<if test="ReactivePowerC != 0.001">
				ReactivePowerC = #{ReactivePowerC},
			</if>
			<if test="ApparentPowerA != 0.001">
				ApparentPowerA = #{ApparentPowerA},
			</if>
			<if test="ApparentPowerB != 0.001">
				ApparentPowerB = #{ApparentPowerB},
			</if>
			<if test="ApparentPowerC != 0.001">
				ApparentPowerC = #{ApparentPowerC},
			</if>
			<if test="PowerFactorA != 0.001">
				PowerFactorA = #{PowerFactorA},
			</if>
			<if test="PowerFactorB != 0.001">
				PowerFactorB = #{PowerFactorB},
			</if>
			<if test="PowerFactorC != 0.001">
				PowerFactorC = #{PowerFactorC},
			</if>
			<if test="VoltageAngleAB != 0.001">
				VoltageAngleAB = #{VoltageAngleAB},
			</if>
			<if test="VoltageAngleBC != 0.001">
				VoltageAngleBC = #{VoltageAngleBC},
			</if>
			<if test="VoltageAngleCA != 0.001">
				VoltageAngleCA = #{VoltageAngleCA},
			</if>
			<if test="QuadrantA != 0.001">
				QuadrantA = #{QuadrantA},
			</if>
			<if test="QuadrantB != 0.001">
				QuadrantB = #{QuadrantB},
			</if>
			<if test="QuadrantC != 0.001">
				QuadrantC = #{QuadrantC},
			</if>
			<if test="SlidingWindowPower != 0.001">
				SlidingWindowPower = #{SlidingWindowPower},
			</if>
			<if test="NetTotalEnergy != 0.001">
				NetTotalEnergy = #{NetTotalEnergy},
			</if>
			<if test="TotalNetApparentEnergy != 0.001">
				TotalNetApparentEnergy = #{TotalNetApparentEnergy},
			</if>
			<if test="TotalImportEnergy != 0.001">
				TotalImportEnergy = #{TotalImportEnergy},
			</if>
			<if test="TotalExportEnergy != 0.001">
				TotalExportEnergy = #{TotalExportEnergy},
			</if>
			<if test="TotalImportApparentEnergy != 0.001">
				TotalImportApparentEnergy = #{TotalImportApparentEnergy},
			</if>
			<if test="TotalExportApparentEnergy != 0.001">
				TotalExportApparentEnergy = #{TotalExportApparentEnergy},
			</if>
			<if test="Q1TotalReactiveEnergy != 0.001">
				Q1TotalReactiveEnergy = #{Q1TotalReactiveEnergy},
			</if>
			<if test="Q2TotalReactiveEnergy != 0.001">
				Q2TotalReactiveEnergy = #{Q2TotalReactiveEnergy},
			</if>
			<if test="Q3TotalReactiveEnergy != 0.001">
				Q3TotalReactiveEnergy = #{Q3TotalReactiveEnergy},
			</if>
			<if test="Q4TotalReactiveEnergy != 0.001">
				Q4TotalReactiveEnergy = #{Q4TotalReactiveEnergy},
			</if>
			<if test="Q1Q2TotalInductiveReactiveEnergy != 0.001">
				Q1Q2TotalInductiveReactiveEnergy = #{Q1Q2TotalInductiveReactiveEnergy},
			</if>
			<if test="Q3Q4TotalCapacitiveReactiveEnergy != 0.001">
				Q3Q4TotalCapacitiveReactiveEnergy = #{Q3Q4TotalCapacitiveReactiveEnergy},
			</if>
			<if test="NetEnergyA != 0.001">
				NetEnergyA = #{NetEnergyA},
			</if>
			<if test="NetEnergyB != 0.001">
				NetEnergyB = #{NetEnergyB},
			</if>
			<if test="NetEnergyC != 0.001">
				NetEnergyC = #{NetEnergyC},
			</if>
			<if test="NetApparentEnergyA != 0.001">
				NetApparentEnergyA = #{NetApparentEnergyA},
			</if>
			<if test="NetApparentEnergyB != 0.001">
				NetApparentEnergyB = #{NetApparentEnergyB},
			</if>
			<if test="NetApparentEnergyC != 0.001">
				NetApparentEnergyC = #{NetApparentEnergyC},
			</if>
			<if test="ImportEnergyA != 0.001">
				ImportEnergyA = #{ImportEnergyA},
			</if>
			<if test="ImportEnergyB != 0.001">
				ImportEnergyB = #{ImportEnergyB},
			</if>
			<if test="ImportEnergyC != 0.001">
				ImportEnergyC = #{ImportEnergyC},
			</if>
			<if test="ExportEnergyA != 0.001">
				ExportEnergyA = #{ExportEnergyA},
			</if>
			<if test="ExportEnergyB != 0.001">
				ExportEnergyB = #{ExportEnergyB},
			</if>
			<if test="ExportEnergyC != 0.001">
				ExportEnergyC = #{ExportEnergyC},
			</if>
			<if test="ImportApparentEnergyA != 0.001">
				ImportApparentEnergyA = #{ImportApparentEnergyA},
			</if>
			<if test="ImportApparentEnergyB != 0.001">
				ImportApparentEnergyB = #{ImportApparentEnergyB},
			</if>
			<if test="ImportApparentEnergyC != 0.001">
				ImportApparentEnergyC = #{ImportApparentEnergyC},
			</if>
			<if test="ExportApparentEnergyA != 0.001">
				ExportApparentEnergyA = #{ExportApparentEnergyA},
			</if>
			<if test="ExportApparentEnergyB != 0.001">
				ExportApparentEnergyB = #{ExportApparentEnergyB},
			</if>
			<if test="ExportApparentEnergyC != 0.001">
				ExportApparentEnergyC = #{ExportApparentEnergyC},
			</if>
			<if test="Q1ReactiveEnergyA != 0.001">
				Q1ReactiveEnergyA = #{Q1ReactiveEnergyA},
			</if>
			<if test="Q1ReactiveEnergyB != 0.001">
				Q1ReactiveEnergyB = #{Q1ReactiveEnergyB},
			</if>
			<if test="Q1ReactiveEnergyC != 0.001">
				Q1ReactiveEnergyC = #{Q1ReactiveEnergyC},
			</if>
			<if test="Q2ReactiveEnergyA != 0.001">
				Q2ReactiveEnergyA = #{Q2ReactiveEnergyA},
			</if>
			<if test="Q2ReactiveEnergyB != 0.001">
				Q2ReactiveEnergyB = #{Q2ReactiveEnergyB},
			</if>
			<if test="Q2ReactiveEnergyC != 0.001">
				Q2ReactiveEnergyC = #{Q2ReactiveEnergyC},
			</if>
			<if test="Q3ReactiveEnergyA != 0.001">
				Q3ReactiveEnergyA = #{Q3ReactiveEnergyA},
			</if>
			<if test="Q3ReactiveEnergyB != 0.001">
				Q3ReactiveEnergyB = #{Q3ReactiveEnergyB},
			</if>
			<if test="Q3ReactiveEnergyC != 0.001">
				Q3ReactiveEnergyC = #{Q3ReactiveEnergyC},
			</if>
			<if test="Q4ReactiveEnergyA != 0.001">
				Q4ReactiveEnergyA = #{Q4ReactiveEnergyA},
			</if>
			<if test="Q4ReactiveEnergyB != 0.001">
				Q4ReactiveEnergyB = #{Q4ReactiveEnergyB},
			</if>
			<if test="Q4ReactiveEnergyC != 0.001">
				Q4ReactiveEnergyC = #{Q4ReactiveEnergyC},
			</if>
			<if test="nvmActivePower != 0.001">
				nvmActivePower = #{nvmActivePower},
			</if>
			<if test="nvmActiveEnergy != 0.001">
				nvmActiveEnergy = #{nvmActiveEnergy},
			</if>
			<if test="MeasuredProduction != 0.001 and MeasuredProduction > 0">
				`MeasuredProduction` = #{MeasuredProduction},
			</if>
		</trim>

	</insert>
	
	
	<select id="getLastRow" resultType="com.nwm.api.entities.ModelElkorProductionMeterv1Entity">
		SELECT
			dv.*,
			s.enable_alert
		FROM
			${view_tablename} dv 
			LEFT JOIN device d ON d.id = dv.id_device
			LEFT JOIN site s ON s.id = d.id_site
		WHERE
			dv.id_device = #{id_device}
			<if test="time != null" >
	        	AND dv.time <![CDATA[<]]> #{time}
	        </if>
		ORDER BY
			dv.time DESC 
			LIMIT 1
	</select>

</mapper> 